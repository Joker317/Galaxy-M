<tool id="pls_toolbox_get_peaklist" name="Get Peaklist">
  <description>Retrieves the MZ and average peak intensity values from a dataset object</description>
  <command>

matlab -nosplash -r "cd('/home/rob/galaxy-dist-031114/tools/PLS_Toolbox');dbstop in get_peaklist_BB;get_peaklist_BB('${pls_dso}','${output}','${messages_out}');exit;"

  </command>


  <inputs>

	<param format="xml" name="pls_dso" type="data" label="PLS dataset object in .xml format" />
		
 

  </inputs>


  <outputs>

    	<data format="csv" name="output" label="Get Peaklist: Peaklist.dlm" />
	<data format="txt" name = "messages_out" label="Get PeakList: messages" />
  </outputs>


  <help>
This tool retrieves information from a PLS Dataset Object: the [1st] axisscale in the 2nd dimension and the corresponding average data values. 

The intended purpose of this tool is to produce a tab delimited file of two columns (headed MZ and Intensity) for passing to the MI Pack tool for MS peak assignment. 

PLS Toolbox dataset objects can have many axisscales for each dimension. It is assumed by this tool that the first axisscale (referenced as dtst.axisscale{2,1}) contains the axisscale of choice. In most metabolomics datasets this ought to be true. 

The message file output is purely for debugging purposes. It will report useful error messages for common errors such as PLS TOolbox not found etc. 
 
  </help>

</tool>
