<tool id="pca_auto" name="PCA - Automatic with Scores Test">
  <description>Variables used by all/many SimStitch functions</description>

  <command>
#if $components.option=="auto"
	matlab -nosplash -r "cd('/home/rob/galaxy-dist-noroot/tools/metabstats');dbstop in PCA_Scores_Test_BB;PCA_Scores_Test_BB('${pls_dso}','${classlist}', '${output}','${results}','${messages}',0);exit;"
#else
	matlab -nosplash -r "cd('/home/rob/galaxy-dist-noroot/tools/metabstats');dbstop in PCA_Scores_Test_BB;PCA_Scores_Test_BB('${pls_dso}','${classlist}', '${output}','${results}','${messages}',$components.numcomps);exit;"
#end if


  </command>

	<inputs>

		<param format="xml" name="pls_dso" type="data" label="PLS dataset object in .xml format" />

		<param name="classlist" type="text" size="10" value="classes" label="Name of the classlist to use for Scores Test procedure (t-test or ANOVA). If name does not match, error will be returned in message file." />

		<conditional name="components">
			<param name="option" type="select" label="Automatically select number of components for model?">
				<option value="auto">Auto</option>
				<option value="manual">Manual</option>
			</param>
 			<when value="manual">
				<param name="numcomps" type="integer" size="3" value="5" label="Select number of components for PCA model. If number is larger than max number of components then all components will be used. " />
			</when>
  		</conditional> 

	</inputs>

  <outputs>

    	<data format="xml" name="output" label="PCA AUTO: PLS Model.xml" />
	<data format="txt" name = "results" label="PCA AUTO: results" />
	<data format="txt" name = "messages" label="PCA AUTO: messages" />
  </outputs>


  <help>

  </help>

</tool>
